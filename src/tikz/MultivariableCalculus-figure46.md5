\begingroup \toks 0={macro:-> \begin {axis}[ anchor=origin, set layers=standard, disabledatascaling, xmin=-.5,xmax=1, ymin=-.5,ymax=1, x=2.2cm,y=2.2cm, grid=both, grid style={line width=.1pt, draw=gray!10}, axis lines=middle, minor tick num=1, enlargelimits={abs=0.4}, axis line style={latex-latex}, ticklabel style={font=\tiny ,fill=white}, xlabel style={at={(ticklabel* cs:1)},anchor=north west}, ylabel style={at={(ticklabel* cs:1)},anchor=south west} ] \par \addplot [name path=f,no marks,mypink,thick,domain=0:1, samples=2, draw=none] ({x},{x}); \addplot [no marks,mypink,thick,domain=-2:3, samples=20,smooth] ({x},{x}); \addplot [name path=g, no marks,green!50!black,thick,domain=-2:5, samples=2] ({x},{1}); \addplot [no marks,green!50!black,thick,domain=-2:5, samples=2] ({0},{x}); \par \addplot [thick, color=blue, fill=blue, fill opacity=0.05] fill between [of=f and g, split,soft clip={domain=0:1}]; \draw (.25,.75) node[] {$\mathcal D$}; \draw [mypink,fill] (.5,.5) node [below right] {$y=x$}; \draw [green!50!black,fill] (.5,1) node [above] {$y=1$}; \draw [green!50!black,fill] (0,-.75) node [left] {$x=0$}; \par \coordinate (A) at (-.01,.58); \coordinate (B) at (-1,.57); \coordinate (C) at (.6,.58); \coordinate (D) at (1.2,.57); \par \draw [fill=gray,draw=none] (0,.57) rectangle (.6,.6); \end {axis} \par \par \par \path [thick] (B) edge[bend left, ->] node[]{} (A); \draw [] (B) node[left] {$(0,y_0)$}; \path [thick] (D) edge[bend right, ->] node[]{} (C); \draw [] (D) node[right] {$(y_0,y_0)$}; \par }\xdef \tikzexternallastkey {\the \toks 0 }\endgroup %
